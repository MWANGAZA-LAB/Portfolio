<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EmailJS Test</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 40px; }
        .test-section { margin: 20px 0; padding: 20px; border: 1px solid #ccc; }
        .success { background: #d4edda; border-color: #c3e6cb; }
        .error { background: #f8d7da; border-color: #f5c6cb; }
        button { padding: 10px 20px; margin: 10px; cursor: pointer; }
        pre { background: #f8f9fa; padding: 15px; border-radius: 5px; }
    </style>
</head>
<body>
    <h1>EmailJS Integration Test</h1>
    
    <div class="test-section">
        <h3>Configuration Status</h3>
        <div id="configStatus"></div>
    </div>
    
    <div class="test-section">
        <h3>Test EmailJS Connection</h3>
        <button onclick="testConnection()">Test Connection</button>
        <div id="connectionResult"></div>
    </div>
    
    <div class="test-section">
        <h3>Test Email Sending</h3>
        <button onclick="testEmail()">Send Test Email</button>
        <div id="emailResult"></div>
    </div>

    <!-- EmailJS CDN -->
    <script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>
    
    <script>
        // EmailJS Configuration (same as your portfolio)
        const emailjsConfig = {
            serviceId: 'service_g7phy0j',
            templateId: 'template_e9qffdo',
            userId: 'QJCeC1YGKyE5WjgEj',
            recipientEmail: 'mwanga02717@gmail.com'
        };

        // Initialize EmailJS
        emailjs.init(emailjsConfig.userId);

        // Check configuration
        function checkConfig() {
            const configDiv = document.getElementById('configStatus');
            const config = `
Service ID: ${emailjsConfig.serviceId}
Template ID: ${emailjsConfig.templateId}
User ID: ${emailjsConfig.userId}
Recipient: ${emailjsConfig.recipientEmail}
            `;
            configDiv.innerHTML = `<pre>${config}</pre>`;
        }

        // Test EmailJS connection
        async function testConnection() {
            const resultDiv = document.getElementById('connectionResult');
            resultDiv.innerHTML = 'Testing connection...';
            
            try {
                if (typeof emailjs === 'undefined') {
                    throw new Error('EmailJS library not loaded');
                }
                
                const isReady = emailjs.isReady();
                if (isReady) {
                    resultDiv.innerHTML = '<div class="success">✅ EmailJS is ready and connected!</div>';
                } else {
                    resultDiv.innerHTML = '<div class="error">❌ EmailJS is not ready yet</div>';
                }
            } catch (error) {
                resultDiv.innerHTML = `<div class="error">❌ Connection failed: ${error.message}</div>`;
            }
        }

        // Test email sending
        async function testEmail() {
            const resultDiv = document.getElementById('emailResult');
            resultDiv.innerHTML = 'Sending test email...';
            
            try {
                const templateParams = {
                    to_email: emailjsConfig.recipientEmail,
                    from_name: 'Portfolio Test',
                    from_email: 'test@portfolio.com',
                    subject: 'Portfolio Contact Form Test',
                    message: 'This is a test email from your portfolio contact form. If you receive this, EmailJS is working correctly!',
                    timestamp: new Date().toISOString()
                };

                const response = await emailjs.send(
                    emailjsConfig.serviceId,
                    emailjsConfig.templateId,
                    templateParams
                );

                if (response.status === 200) {
                    resultDiv.innerHTML = '<div class="success">✅ Test email sent successfully! Check your inbox at mwanga02717@gmail.com</div>';
                } else {
                    throw new Error(`EmailJS returned status: ${response.status}`);
                }
            } catch (error) {
                resultDiv.innerHTML = `<div class="error">❌ Email sending failed: ${error.message}</div>`;
                console.error('EmailJS Error:', error);
            }
        }

        // Initialize on page load
        window.onload = function() {
            checkConfig();
            setTimeout(testConnection, 1000); // Test connection after 1 second
        };
    </script>
</body>
</html>
